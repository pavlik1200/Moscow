function isHostMethod(a,b){var c=typeof a[b];return"function"==c||!("object"!=c||!a[b])||"unknown"==c}window.alwaysTrustedOrigins=[/.*.mos.ru/];var getXhr=function(){if(isHostMethod(window,"XMLHttpRequest"))return function(){return new XMLHttpRequest};var a=function(){for(var b=["Microsoft","Msxml2","Msxml3"],c=b.length;c--;)try{return a=b[c]+".XMLHTTP",new ActiveXObject(a),a}catch(d){}}();return function(){return new ActiveXObject(a)}}(),useAccessControl=!0,remote=new easyXDM.Rpc({local:"name.html",swf:"easyxdm.swf"},{local:{request:function(a,b,c){easyXDM.apply(a,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},success:Function.prototype,error:function(a){throw new Error(a)},data:{},timeout:1e4},!0),window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest||(a.headers.Origin=remote.origin);var d="POST"==a.method,e=[];for(var f in a.data)a.data.hasOwnProperty(f)&&e.push(encodeURIComponent(f)+"="+encodeURIComponent(a.data[f]));var g=e.join("&"),h=getXhr(),i=!d&&g?a.url+(~a.url.indexOf("?")?"&":"?")+g:a.url;h.open(a.method,i,!0);for(var j in a.headers)a.headers.hasOwnProperty(j)&&a.headers[j]&&h.setRequestHeader(j,a.headers[j]);var k;k=setTimeout(function(){h.onreadystatechange=Function.prototype,h.abort(),h=null,c({message:"timeout after "+a.timeout+" second",status:0,data:null,toString:function(){return this.message+" Status: "+this.status}},null)},a.timeout);for(var l=!1,m=window.alwaysTrustedOrigins,n=m.length;n--&&!l;)m[n]instanceof RegExp?l=m[n].test(remote.origin):"string"==typeof m[n]&&(l=remote.origin===m[n]);h.onreadystatechange=function(){if(4==h.readyState){clearTimeout(k);for(var d,e=h.getAllResponseHeaders(),f={},g={},i=/([\w-_]+):\s+(.*)$/gm;d=i.exec(e);)g[d[1].toLowerCase()]=f[d[1]]=d[2];if(h.status<200||h.status>=300)useAccessControl?c("INVALID_STATUS_CODE"):c("INVALID_STATUS_CODE",{status:h.status,data:h.responseText});else{var j;if(useAccessControl){var m=(g["access-control-allow-origin"]||"").replace(/\s/g,""),n=(g["access-control-allow-methods"]||"").replace(/\s/g,"");l||"*"==m||-1!=m.indexOf(remote.origin)?n&&"*"!=n&&-1==n.indexOf(a.method)&&(j="DISALLOWED_REQUEST_METHOD"):j="DISALLOWED_ORIGIN"}j?c(j):b({data:h.responseText,status:h.status,headers:f})}h.onreadystatechange=Function.prototype,h=null}},h.send(d?g:"")}}});